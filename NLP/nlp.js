const typoCorrections = {
  // أحكام عامة
  جكم: "حكم",
  حكمم: "حكم",
  حكك: "حكم",
  "كم,": "حكم",
  // الصيام
  الصام: "الصيام",
  صىام: "الصيام",
  اصيام: "الصيام",
  الصياام: "الصيام",
  صيامم: "الصيام",
  والصام: "الصيام",
  وصوم: "الصيام",
  السام: "الصيام",
  سيام: "الصيام",

  // الصلاة
  الصات: "الصلاة",
  اصلاة: "الصلاة",
  الصلاه: "الصلاة",
  الصلات: "الصلاة",
  صلات: "الصلاة",
  الصلا: "الصلاة",
  اصلات: "الصلاة",
  صلاء: "الصلاة",
  السلاة: "الصلاة",

  // الزكاة
  الذكاة: "الزكاة",
  زكاه: "الزكاة",
  زكات: "الزكاة",
  زكاة: "الزكاة",
  زكا: "الزكاة",
  كاة: "الزكاة",
  زكاهه: "الزكاة",
  زكاهات: "الزكاة",
  زكات: "الزكاة",
  الكاة: "الزكاة",

  // الحج
  الحح: "الحج",
  اج: "الحج",
  الحجج: "الحج",
  الحق: "الحج",
  الحد: "الحج",

  // الجنابة
  جنبابة: "الجنابة",
  الجنابه: "الجنابة",
  الجنبه: "الجنابة",
  جنابه: "الجنابة",
  جنبه: "الجنابة",

  // الطهارة
  الطهاره: "الطهارة",
  الطهراة: "الطهارة",
  الطهره: "الطهارة",
  طاهره: "الطهارة",
  طهاره: "الطهارة",

  // النية
  نيه: "النية",
  النيه: "النية",
  انويه: "النية",
  نيت: "النية",

  // الجنائز
  جناز: "الجنازة",
  الجناز: "الجنازة",
  جنازه: "الجنازة",

  // الصدقة
  صدقه: "الصدقة",
  الصدقه: "الصدقة",
  الصدق: "الصدقة",

  // الوضوء
  الوضو: "الوضوء",
  الوضء: "الوضوء",
  وضوء: "الوضوء",
  وضو: "الوضوء",

  // الغسل
  الغسلل: "الغسل",
  الغسسل: "الغسل",
  غسلل: "الغسل",

  // يوم/ليلة
  ليله: "ليلة",
  يومم: "اليوم",
  ليالي: "ليلة",
  اليومم: "اليوم",

  // الكفارة
  كفاره: "الكفارة",
  الكفاره: "الكفارة",
  الكفرت: "الكفارة",

  // الاستحاضة
  الاستحاضه: "الاستحاضة",
  استحاضه: "الاستحاضة",
  استحظه: "الاستحاضة",

  // الطلاق
  اطلاق: "الطلاق",
  تلاق: "الطلاق",
  اطلق: "الطلاق",

  // اللغة
  جكى: "حكم",
  حككم: "حكم",
  حكمم: "حكم",
  ييوم: "يوم",
  رمصان: "رمضان",
  صهان: "صيام",
  صلام: "صلاة",
  جنازه: "جنازة",
  // الفطر
  فطرر: "الفطر",
  فطررر: "الفطر",
  قطر: "الفطر",
  فطر: "الفطر",
  فطور: "الفطر",
  افطار: "الفطر",
  فطور: "الفطر",
  الفطور: "الفطر",
};

function correctTypos(input) {
  let text = input; // تنظيف الحروف أولاً

  for (const typo in typoCorrections) {
    const correct = typoCorrections[typo];

    // استخدام نمط أكثر دقة مع العربية بدل \b
    const regex = new RegExp(
      `(^|[\\s،؟.!"'()\\[\\]{}])${typo}(?=\\s|$|[،؟.!"'()\\[\\]{}])`,
      "gi"
    );

    text = text.replace(regex, (_, prefix) => `${prefix}${correct}`);
  }

  return text;
}

module.exports = { correctTypos };
